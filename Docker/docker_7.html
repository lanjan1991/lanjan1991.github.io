<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Docker安装MariaDB | 流浪地球</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="/logo.ico">
    <meta name="description" content="纵然出走时未曾想要流浪半生，归来时早已发现少年不再">
    
    <link rel="preload" href="/assets/css/0.styles.d877a302.css" as="style"><link rel="preload" href="/assets/js/app.02ee7191.js" as="script"><link rel="preload" href="/assets/js/2.02c84e28.js" as="script"><link rel="preload" href="/assets/js/14.a0e77714.js" as="script"><link rel="prefetch" href="/assets/js/10.2055064e.js"><link rel="prefetch" href="/assets/js/11.4b3e1ef3.js"><link rel="prefetch" href="/assets/js/12.e0f76d89.js"><link rel="prefetch" href="/assets/js/13.2349f0d0.js"><link rel="prefetch" href="/assets/js/15.6eaee848.js"><link rel="prefetch" href="/assets/js/16.2fb29ed6.js"><link rel="prefetch" href="/assets/js/17.336eaedd.js"><link rel="prefetch" href="/assets/js/18.848f8ec4.js"><link rel="prefetch" href="/assets/js/19.6d1cb2b8.js"><link rel="prefetch" href="/assets/js/20.e2dabdb4.js"><link rel="prefetch" href="/assets/js/21.75877e54.js"><link rel="prefetch" href="/assets/js/22.1a51a2df.js"><link rel="prefetch" href="/assets/js/23.f85b852a.js"><link rel="prefetch" href="/assets/js/24.cd7fe2c9.js"><link rel="prefetch" href="/assets/js/25.10d899c8.js"><link rel="prefetch" href="/assets/js/26.60013add.js"><link rel="prefetch" href="/assets/js/27.ffa27e2b.js"><link rel="prefetch" href="/assets/js/28.6d7bac35.js"><link rel="prefetch" href="/assets/js/29.a7f8b3c4.js"><link rel="prefetch" href="/assets/js/3.024b4ace.js"><link rel="prefetch" href="/assets/js/30.02c1d3e8.js"><link rel="prefetch" href="/assets/js/31.3fc10ecb.js"><link rel="prefetch" href="/assets/js/32.db6c6f4f.js"><link rel="prefetch" href="/assets/js/33.2737c646.js"><link rel="prefetch" href="/assets/js/4.9a7a3248.js"><link rel="prefetch" href="/assets/js/5.5a66fd6a.js"><link rel="prefetch" href="/assets/js/6.4bfe8bd0.js"><link rel="prefetch" href="/assets/js/7.3c769bf7.js"><link rel="prefetch" href="/assets/js/8.14f53579.js"><link rel="prefetch" href="/assets/js/9.e56cdb5d.js">
    <link rel="stylesheet" href="/assets/css/0.styles.d877a302.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">流浪地球</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><span class="title">Java</span> <span class="arrow down"></span></button> <button type="button" aria-label="Java" class="mobile-dropdown-title"><span class="title">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Java/java_1.html" class="nav-link">
  jobHandler调度管理
</a></li><li class="dropdown-item"><!----> <a href="/Java/java_2.html" class="nav-link">
  jProtobuf尝鲜
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="SpringBoot" class="dropdown-title"><span class="title">SpringBoot</span> <span class="arrow down"></span></button> <button type="button" aria-label="SpringBoot" class="mobile-dropdown-title"><span class="title">SpringBoot</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/SpringBoot/springboot_1.html" class="nav-link">
  使用Docker部署Spring Boot
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="SpringCloud" class="dropdown-title"><span class="title">SpringCloud</span> <span class="arrow down"></span></button> <button type="button" aria-label="SpringCloud" class="mobile-dropdown-title"><span class="title">SpringCloud</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/SpringCloud/springcloud_1.html" class="nav-link">
  springcloud(一)：初识Spring Cloud
</a></li><li class="dropdown-item"><!----> <a href="/SpringCloud/springcloud_2.html" class="nav-link">
  springcloud(二)：注册中心Eureka
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="大数据" class="dropdown-title"><span class="title">大数据</span> <span class="arrow down"></span></button> <button type="button" aria-label="大数据" class="mobile-dropdown-title"><span class="title">大数据</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/BigData/bigdata_1.html" class="nav-link">
  使用Docker搭建Hadoop集群(伪分布式与完全分布式)
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Linux" class="dropdown-title"><span class="title">Linux</span> <span class="arrow down"></span></button> <button type="button" aria-label="Linux" class="mobile-dropdown-title"><span class="title">Linux</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Linux/linux_1.html" class="nav-link">
  虚拟机3种网络模式
</a></li><li class="dropdown-item"><!----> <a href="/Linux/linux_2.html" class="nav-link">
  linux常用命令总结
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Docker" class="dropdown-title"><span class="title">Docker</span> <span class="arrow down"></span></button> <button type="button" aria-label="Docker" class="mobile-dropdown-title"><span class="title">Docker</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Docker/docker_1.html" class="nav-link">
  Docker(一)：Docker入门教程
</a></li><li class="dropdown-item"><!----> <a href="/Docker/docker_2.html" class="nav-link">
  Docker(二)：Dockerfile使用介绍
</a></li><li class="dropdown-item"><!----> <a href="/Docker/docker_3.html" class="nav-link">
  Docker(三)：Dockerfile命令详解
</a></li><li class="dropdown-item"><!----> <a href="/Docker/docker_4.html" class="nav-link">
  Docker(四)：Docker三剑客之Docker Compose
</a></li><li class="dropdown-item"><!----> <a href="/Docker/docker_5.html" class="nav-link">
  Docker(五)：Docker三剑客之Docker Machine
</a></li><li class="dropdown-item"><!----> <a href="/Docker/docker_6.html" class="nav-link">
  Docker(六)：Docker三剑客之Docker Swarm
</a></li><li class="dropdown-item"><!----> <a href="/Docker/docker_7.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Docker安装MariaDB
</a></li><li class="dropdown-item"><!----> <a href="/Docker/docker_8.html" class="nav-link">
  Docker安装Redis
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Nginx" class="dropdown-title"><span class="title">Nginx</span> <span class="arrow down"></span></button> <button type="button" aria-label="Nginx" class="mobile-dropdown-title"><span class="title">Nginx</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/OpenResty/nginx.html" class="nav-link">
  Nginx 配置详解
</a></li><li class="dropdown-item"><!----> <a href="/OpenResty/nginx_2.html" class="nav-link">
  Nginx 常用命令
</a></li><li class="dropdown-item"><!----> <a href="/OpenResty/openresty_1.html" class="nav-link">
  OpenResty 使用介绍
</a></li><li class="dropdown-item"><!----> <a href="/OpenResty/openresty_2.html" class="nav-link">
  OpenResty(Nginx+Lua)测试用例
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Jenkins" class="dropdown-title"><span class="title">Jenkins</span> <span class="arrow down"></span></button> <button type="button" aria-label="Jenkins" class="mobile-dropdown-title"><span class="title">Jenkins</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Jenkins/jenkins_1.html" class="nav-link">
  快速安装Jenkins完美教程
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其它" class="dropdown-title"><span class="title">其它</span> <span class="arrow down"></span></button> <button type="button" aria-label="其它" class="mobile-dropdown-title"><span class="title">其它</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Other/2019.1.2.html" class="nav-link">
  Vuepress搭建静态博客
</a></li><li class="dropdown-item"><!----> <a href="/Other/markdown.html" class="nav-link">
  Markdown基本语法
</a></li></ul></div></div><div class="nav-item"><a href="/Readme/index.html" class="nav-link">
  关于我
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><span class="title">Java</span> <span class="arrow down"></span></button> <button type="button" aria-label="Java" class="mobile-dropdown-title"><span class="title">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Java/java_1.html" class="nav-link">
  jobHandler调度管理
</a></li><li class="dropdown-item"><!----> <a href="/Java/java_2.html" class="nav-link">
  jProtobuf尝鲜
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="SpringBoot" class="dropdown-title"><span class="title">SpringBoot</span> <span class="arrow down"></span></button> <button type="button" aria-label="SpringBoot" class="mobile-dropdown-title"><span class="title">SpringBoot</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/SpringBoot/springboot_1.html" class="nav-link">
  使用Docker部署Spring Boot
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="SpringCloud" class="dropdown-title"><span class="title">SpringCloud</span> <span class="arrow down"></span></button> <button type="button" aria-label="SpringCloud" class="mobile-dropdown-title"><span class="title">SpringCloud</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/SpringCloud/springcloud_1.html" class="nav-link">
  springcloud(一)：初识Spring Cloud
</a></li><li class="dropdown-item"><!----> <a href="/SpringCloud/springcloud_2.html" class="nav-link">
  springcloud(二)：注册中心Eureka
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="大数据" class="dropdown-title"><span class="title">大数据</span> <span class="arrow down"></span></button> <button type="button" aria-label="大数据" class="mobile-dropdown-title"><span class="title">大数据</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/BigData/bigdata_1.html" class="nav-link">
  使用Docker搭建Hadoop集群(伪分布式与完全分布式)
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Linux" class="dropdown-title"><span class="title">Linux</span> <span class="arrow down"></span></button> <button type="button" aria-label="Linux" class="mobile-dropdown-title"><span class="title">Linux</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Linux/linux_1.html" class="nav-link">
  虚拟机3种网络模式
</a></li><li class="dropdown-item"><!----> <a href="/Linux/linux_2.html" class="nav-link">
  linux常用命令总结
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Docker" class="dropdown-title"><span class="title">Docker</span> <span class="arrow down"></span></button> <button type="button" aria-label="Docker" class="mobile-dropdown-title"><span class="title">Docker</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Docker/docker_1.html" class="nav-link">
  Docker(一)：Docker入门教程
</a></li><li class="dropdown-item"><!----> <a href="/Docker/docker_2.html" class="nav-link">
  Docker(二)：Dockerfile使用介绍
</a></li><li class="dropdown-item"><!----> <a href="/Docker/docker_3.html" class="nav-link">
  Docker(三)：Dockerfile命令详解
</a></li><li class="dropdown-item"><!----> <a href="/Docker/docker_4.html" class="nav-link">
  Docker(四)：Docker三剑客之Docker Compose
</a></li><li class="dropdown-item"><!----> <a href="/Docker/docker_5.html" class="nav-link">
  Docker(五)：Docker三剑客之Docker Machine
</a></li><li class="dropdown-item"><!----> <a href="/Docker/docker_6.html" class="nav-link">
  Docker(六)：Docker三剑客之Docker Swarm
</a></li><li class="dropdown-item"><!----> <a href="/Docker/docker_7.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Docker安装MariaDB
</a></li><li class="dropdown-item"><!----> <a href="/Docker/docker_8.html" class="nav-link">
  Docker安装Redis
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Nginx" class="dropdown-title"><span class="title">Nginx</span> <span class="arrow down"></span></button> <button type="button" aria-label="Nginx" class="mobile-dropdown-title"><span class="title">Nginx</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/OpenResty/nginx.html" class="nav-link">
  Nginx 配置详解
</a></li><li class="dropdown-item"><!----> <a href="/OpenResty/nginx_2.html" class="nav-link">
  Nginx 常用命令
</a></li><li class="dropdown-item"><!----> <a href="/OpenResty/openresty_1.html" class="nav-link">
  OpenResty 使用介绍
</a></li><li class="dropdown-item"><!----> <a href="/OpenResty/openresty_2.html" class="nav-link">
  OpenResty(Nginx+Lua)测试用例
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Jenkins" class="dropdown-title"><span class="title">Jenkins</span> <span class="arrow down"></span></button> <button type="button" aria-label="Jenkins" class="mobile-dropdown-title"><span class="title">Jenkins</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Jenkins/jenkins_1.html" class="nav-link">
  快速安装Jenkins完美教程
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其它" class="dropdown-title"><span class="title">其它</span> <span class="arrow down"></span></button> <button type="button" aria-label="其它" class="mobile-dropdown-title"><span class="title">其它</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Other/2019.1.2.html" class="nav-link">
  Vuepress搭建静态博客
</a></li><li class="dropdown-item"><!----> <a href="/Other/markdown.html" class="nav-link">
  Markdown基本语法
</a></li></ul></div></div><div class="nav-item"><a href="/Readme/index.html" class="nav-link">
  关于我
</a></div> <!----></nav>  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="docker安装mariadb"><a href="#docker安装mariadb" class="header-anchor">#</a> Docker安装MariaDB</h1> <ol><li><p><code>docker search mariadb</code> 搜索mariadb镜像（非必须）</p></li> <li><p><code>docker pull mariadb</code> 下载docker镜像</p></li> <li><p><code>docker images</code> 查看本地已有的所有镜像</p></li> <li><p><code>mkdir -p /data/mariadb/data</code> 建一个目录作为和容器的映射目录</p></li> <li><p><code>docker run --name mariadb -p 3306:3306 -e MYSQL_ROOT_PASSWORD=输入数据库root用户的密码 -v /data/mariadb/data:/var/lib/mysql -d mariadb</code></p></li></ol> <div class="language- extra-class"><pre class="language-text"><code>　　--name启动容器设置容器名称为mariadb

　　-p设置容器的3306端口映射到主机3306端口

　　-e MYSQL_ROOT_PASSWORD设置环境变量数据库root用户密码为输入数据库root用户的密码

　　-v设置容器目录/var/lib/mysql映射到本地目录/data/mariadb/data

　　-d后台运行容器mariadb并返回容器id
</code></pre></div><ol start="6"><li><p><code>docker ps -a</code>查看容器是否运行</p></li> <li><p><code>docker container update --restart=always</code> 容器id   修改容器为自启动</p></li> <li><p>进入容器<code>docker exec -it</code> 容器Id bash</p></li></ol> <p>退出容器：<code>exit</code>或者<code>Ctrl+P+Q</code></p> <ol start="9"><li><p>在容器内登录数据库 <code>mysql -uroot -proot密码</code></p></li> <li><p>修改远程登录j及密码</p></li></ol> <div class="language- extra-class"><pre class="language-text"><code>1、设置远程登录：

MariaDB [(none)]&gt; GRANT ALL PRIVILEGES ON *.* TO root@&quot;%&quot; IDENTIFIED BY &quot;root&quot;;
Query OK, 0 rows affected (0.00 sec)

MariaDB [(none)]&gt; flush privileges;
Query OK, 0 rows affected (0.00 sec)
2、修改用户密码，以root为例

知道root密码，需要修改
方法a. 登入数据库来修改
# mysql -uroot -p /*输入密码进入*/  
/*第一个方式：直接编辑数据库字段*/  
MariaDB [(none)]&gt; use mysql;  
MariaDB [mysql]&gt; UPDATE user SET password=password('newpassword') WHERE user='root';  
MariaDB [mysql]&gt; flush privileges;  
MariaDB [mysql]&gt; exit  
/*第二个方式：修改密码，不用进入mysql*/  
MariaDB [(none)]&gt; SET password for 'root'@'localhost'=password('newpassword');  
MariaDB [(none)]&gt; exit;  

忘记密码：
# systemctl stop mariadb /*先停掉当前的mysql进程，不然执行下一步说进程已经存在*/  
# mysqld_safe --skip-grant-tables &amp; /*后台直接这个mysql，界面中还会出现日志，直接ctrl+c进入命令行输入*/   
# ps -ef | grep mariadb /*看进程，会突出显示--skip-grant-tables*/  
  mysql     3607  3368  0 18:05 pts/0    00:00:00 /usr/libexec/mysqld --basedir=/usr --datadir=/var/lib/mysql   
  --plugin-dir=/usr/lib64/mysql/plugin --user=mysql --skip-grant-tables --log-error=/var/log/mariadb/mariadb.log   
  --pid-file=/var/run/mariadb/mariadb.pid --socket=/var/lib/mysql/mysql.sock  
# mysql /*直接进入mysql，不需要密码等，执行第一步中方法a里两种方式中任何一种即可*/  
MariaDB [(none)]&gt; use mysql;  
MariaDB [mysql]&gt; UPDATE user SET password=password('newpassword') WHERE user='root';  
MariaDB [mysql]&gt; flush privileges;   
MariaDB [mysql]&gt; exit; /*这个时候用参数--skip-grant-tables启动的mysql已经会要求输入密码才能进入了*/  
# pkill mysql /*用pkill来杀,kill不死，kill之后自动起来一个*/  
# systemctl start mariadb /*启动正常的mysql*/
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">11/7/2020, 8:35:55 PM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.02ee7191.js" defer></script><script src="/assets/js/2.02c84e28.js" defer></script><script src="/assets/js/14.a0e77714.js" defer></script>
  </body>
</html>
