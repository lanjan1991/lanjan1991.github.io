<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>OpenResty 使用介绍 | 流浪地球</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="/logo.ico">
    <meta name="description" content="纵然出走时未曾想要流浪半生，归来时早已发现少年不再">
    
    <link rel="preload" href="/assets/css/0.styles.d877a302.css" as="style"><link rel="preload" href="/assets/js/app.02ee7191.js" as="script"><link rel="preload" href="/assets/js/2.02c84e28.js" as="script"><link rel="preload" href="/assets/js/23.f85b852a.js" as="script"><link rel="prefetch" href="/assets/js/10.2055064e.js"><link rel="prefetch" href="/assets/js/11.4b3e1ef3.js"><link rel="prefetch" href="/assets/js/12.e0f76d89.js"><link rel="prefetch" href="/assets/js/13.2349f0d0.js"><link rel="prefetch" href="/assets/js/14.a0e77714.js"><link rel="prefetch" href="/assets/js/15.6eaee848.js"><link rel="prefetch" href="/assets/js/16.2fb29ed6.js"><link rel="prefetch" href="/assets/js/17.336eaedd.js"><link rel="prefetch" href="/assets/js/18.848f8ec4.js"><link rel="prefetch" href="/assets/js/19.6d1cb2b8.js"><link rel="prefetch" href="/assets/js/20.e2dabdb4.js"><link rel="prefetch" href="/assets/js/21.75877e54.js"><link rel="prefetch" href="/assets/js/22.1a51a2df.js"><link rel="prefetch" href="/assets/js/24.cd7fe2c9.js"><link rel="prefetch" href="/assets/js/25.10d899c8.js"><link rel="prefetch" href="/assets/js/26.60013add.js"><link rel="prefetch" href="/assets/js/27.ffa27e2b.js"><link rel="prefetch" href="/assets/js/28.6d7bac35.js"><link rel="prefetch" href="/assets/js/29.a7f8b3c4.js"><link rel="prefetch" href="/assets/js/3.024b4ace.js"><link rel="prefetch" href="/assets/js/30.02c1d3e8.js"><link rel="prefetch" href="/assets/js/31.3fc10ecb.js"><link rel="prefetch" href="/assets/js/32.db6c6f4f.js"><link rel="prefetch" href="/assets/js/33.2737c646.js"><link rel="prefetch" href="/assets/js/4.9a7a3248.js"><link rel="prefetch" href="/assets/js/5.5a66fd6a.js"><link rel="prefetch" href="/assets/js/6.4bfe8bd0.js"><link rel="prefetch" href="/assets/js/7.3c769bf7.js"><link rel="prefetch" href="/assets/js/8.14f53579.js"><link rel="prefetch" href="/assets/js/9.e56cdb5d.js">
    <link rel="stylesheet" href="/assets/css/0.styles.d877a302.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">流浪地球</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><span class="title">Java</span> <span class="arrow down"></span></button> <button type="button" aria-label="Java" class="mobile-dropdown-title"><span class="title">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Java/java_1.html" class="nav-link">
  jobHandler调度管理
</a></li><li class="dropdown-item"><!----> <a href="/Java/java_2.html" class="nav-link">
  jProtobuf尝鲜
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="SpringBoot" class="dropdown-title"><span class="title">SpringBoot</span> <span class="arrow down"></span></button> <button type="button" aria-label="SpringBoot" class="mobile-dropdown-title"><span class="title">SpringBoot</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/SpringBoot/springboot_1.html" class="nav-link">
  使用Docker部署Spring Boot
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="SpringCloud" class="dropdown-title"><span class="title">SpringCloud</span> <span class="arrow down"></span></button> <button type="button" aria-label="SpringCloud" class="mobile-dropdown-title"><span class="title">SpringCloud</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/SpringCloud/springcloud_1.html" class="nav-link">
  springcloud(一)：初识Spring Cloud
</a></li><li class="dropdown-item"><!----> <a href="/SpringCloud/springcloud_2.html" class="nav-link">
  springcloud(二)：注册中心Eureka
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="大数据" class="dropdown-title"><span class="title">大数据</span> <span class="arrow down"></span></button> <button type="button" aria-label="大数据" class="mobile-dropdown-title"><span class="title">大数据</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/BigData/bigdata_1.html" class="nav-link">
  使用Docker搭建Hadoop集群(伪分布式与完全分布式)
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Linux" class="dropdown-title"><span class="title">Linux</span> <span class="arrow down"></span></button> <button type="button" aria-label="Linux" class="mobile-dropdown-title"><span class="title">Linux</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Linux/linux_1.html" class="nav-link">
  虚拟机3种网络模式
</a></li><li class="dropdown-item"><!----> <a href="/Linux/linux_2.html" class="nav-link">
  linux常用命令总结
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Docker" class="dropdown-title"><span class="title">Docker</span> <span class="arrow down"></span></button> <button type="button" aria-label="Docker" class="mobile-dropdown-title"><span class="title">Docker</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Docker/docker_1.html" class="nav-link">
  Docker(一)：Docker入门教程
</a></li><li class="dropdown-item"><!----> <a href="/Docker/docker_2.html" class="nav-link">
  Docker(二)：Dockerfile使用介绍
</a></li><li class="dropdown-item"><!----> <a href="/Docker/docker_3.html" class="nav-link">
  Docker(三)：Dockerfile命令详解
</a></li><li class="dropdown-item"><!----> <a href="/Docker/docker_4.html" class="nav-link">
  Docker(四)：Docker三剑客之Docker Compose
</a></li><li class="dropdown-item"><!----> <a href="/Docker/docker_5.html" class="nav-link">
  Docker(五)：Docker三剑客之Docker Machine
</a></li><li class="dropdown-item"><!----> <a href="/Docker/docker_6.html" class="nav-link">
  Docker(六)：Docker三剑客之Docker Swarm
</a></li><li class="dropdown-item"><!----> <a href="/Docker/docker_7.html" class="nav-link">
  Docker安装MariaDB
</a></li><li class="dropdown-item"><!----> <a href="/Docker/docker_8.html" class="nav-link">
  Docker安装Redis
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Nginx" class="dropdown-title"><span class="title">Nginx</span> <span class="arrow down"></span></button> <button type="button" aria-label="Nginx" class="mobile-dropdown-title"><span class="title">Nginx</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/OpenResty/nginx.html" class="nav-link">
  Nginx 配置详解
</a></li><li class="dropdown-item"><!----> <a href="/OpenResty/nginx_2.html" class="nav-link">
  Nginx 常用命令
</a></li><li class="dropdown-item"><!----> <a href="/OpenResty/openresty_1.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  OpenResty 使用介绍
</a></li><li class="dropdown-item"><!----> <a href="/OpenResty/openresty_2.html" class="nav-link">
  OpenResty(Nginx+Lua)测试用例
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Jenkins" class="dropdown-title"><span class="title">Jenkins</span> <span class="arrow down"></span></button> <button type="button" aria-label="Jenkins" class="mobile-dropdown-title"><span class="title">Jenkins</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Jenkins/jenkins_1.html" class="nav-link">
  快速安装Jenkins完美教程
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其它" class="dropdown-title"><span class="title">其它</span> <span class="arrow down"></span></button> <button type="button" aria-label="其它" class="mobile-dropdown-title"><span class="title">其它</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Other/2019.1.2.html" class="nav-link">
  Vuepress搭建静态博客
</a></li><li class="dropdown-item"><!----> <a href="/Other/markdown.html" class="nav-link">
  Markdown基本语法
</a></li></ul></div></div><div class="nav-item"><a href="/Readme/index.html" class="nav-link">
  关于我
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><span class="title">Java</span> <span class="arrow down"></span></button> <button type="button" aria-label="Java" class="mobile-dropdown-title"><span class="title">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Java/java_1.html" class="nav-link">
  jobHandler调度管理
</a></li><li class="dropdown-item"><!----> <a href="/Java/java_2.html" class="nav-link">
  jProtobuf尝鲜
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="SpringBoot" class="dropdown-title"><span class="title">SpringBoot</span> <span class="arrow down"></span></button> <button type="button" aria-label="SpringBoot" class="mobile-dropdown-title"><span class="title">SpringBoot</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/SpringBoot/springboot_1.html" class="nav-link">
  使用Docker部署Spring Boot
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="SpringCloud" class="dropdown-title"><span class="title">SpringCloud</span> <span class="arrow down"></span></button> <button type="button" aria-label="SpringCloud" class="mobile-dropdown-title"><span class="title">SpringCloud</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/SpringCloud/springcloud_1.html" class="nav-link">
  springcloud(一)：初识Spring Cloud
</a></li><li class="dropdown-item"><!----> <a href="/SpringCloud/springcloud_2.html" class="nav-link">
  springcloud(二)：注册中心Eureka
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="大数据" class="dropdown-title"><span class="title">大数据</span> <span class="arrow down"></span></button> <button type="button" aria-label="大数据" class="mobile-dropdown-title"><span class="title">大数据</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/BigData/bigdata_1.html" class="nav-link">
  使用Docker搭建Hadoop集群(伪分布式与完全分布式)
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Linux" class="dropdown-title"><span class="title">Linux</span> <span class="arrow down"></span></button> <button type="button" aria-label="Linux" class="mobile-dropdown-title"><span class="title">Linux</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Linux/linux_1.html" class="nav-link">
  虚拟机3种网络模式
</a></li><li class="dropdown-item"><!----> <a href="/Linux/linux_2.html" class="nav-link">
  linux常用命令总结
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Docker" class="dropdown-title"><span class="title">Docker</span> <span class="arrow down"></span></button> <button type="button" aria-label="Docker" class="mobile-dropdown-title"><span class="title">Docker</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Docker/docker_1.html" class="nav-link">
  Docker(一)：Docker入门教程
</a></li><li class="dropdown-item"><!----> <a href="/Docker/docker_2.html" class="nav-link">
  Docker(二)：Dockerfile使用介绍
</a></li><li class="dropdown-item"><!----> <a href="/Docker/docker_3.html" class="nav-link">
  Docker(三)：Dockerfile命令详解
</a></li><li class="dropdown-item"><!----> <a href="/Docker/docker_4.html" class="nav-link">
  Docker(四)：Docker三剑客之Docker Compose
</a></li><li class="dropdown-item"><!----> <a href="/Docker/docker_5.html" class="nav-link">
  Docker(五)：Docker三剑客之Docker Machine
</a></li><li class="dropdown-item"><!----> <a href="/Docker/docker_6.html" class="nav-link">
  Docker(六)：Docker三剑客之Docker Swarm
</a></li><li class="dropdown-item"><!----> <a href="/Docker/docker_7.html" class="nav-link">
  Docker安装MariaDB
</a></li><li class="dropdown-item"><!----> <a href="/Docker/docker_8.html" class="nav-link">
  Docker安装Redis
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Nginx" class="dropdown-title"><span class="title">Nginx</span> <span class="arrow down"></span></button> <button type="button" aria-label="Nginx" class="mobile-dropdown-title"><span class="title">Nginx</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/OpenResty/nginx.html" class="nav-link">
  Nginx 配置详解
</a></li><li class="dropdown-item"><!----> <a href="/OpenResty/nginx_2.html" class="nav-link">
  Nginx 常用命令
</a></li><li class="dropdown-item"><!----> <a href="/OpenResty/openresty_1.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  OpenResty 使用介绍
</a></li><li class="dropdown-item"><!----> <a href="/OpenResty/openresty_2.html" class="nav-link">
  OpenResty(Nginx+Lua)测试用例
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Jenkins" class="dropdown-title"><span class="title">Jenkins</span> <span class="arrow down"></span></button> <button type="button" aria-label="Jenkins" class="mobile-dropdown-title"><span class="title">Jenkins</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Jenkins/jenkins_1.html" class="nav-link">
  快速安装Jenkins完美教程
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其它" class="dropdown-title"><span class="title">其它</span> <span class="arrow down"></span></button> <button type="button" aria-label="其它" class="mobile-dropdown-title"><span class="title">其它</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Other/2019.1.2.html" class="nav-link">
  Vuepress搭建静态博客
</a></li><li class="dropdown-item"><!----> <a href="/Other/markdown.html" class="nav-link">
  Markdown基本语法
</a></li></ul></div></div><div class="nav-item"><a href="/Readme/index.html" class="nav-link">
  关于我
</a></div> <!----></nav>  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="openresty-使用介绍"><a href="#openresty-使用介绍" class="header-anchor">#</a> OpenResty 使用介绍</h1> <h2 id="openresty-介绍"><a href="#openresty-介绍" class="header-anchor">#</a> OpenResty 介绍</h2> <p>OpenResty(又称：ngx_openresty) 是一个基于 NGINX 的可伸缩的 Web 平台，由中国人章亦春发起，提供了很多高质量的第三方模块。</p> <p>OpenResty 是一个强大的 Web 应用服务器，Web 开发人员可以使用 Lua 脚本语言调动 Nginx 支持的各种 C 以及 Lua 模块,更主要的是在性能方面，OpenResty可以 快速构造出足以胜任 10K 以上并发连接响应的超高性能 Web 应用系统。</p> <p>360，UPYUN，阿里云，新浪，腾讯网，去哪儿网，酷狗音乐等都是 OpenResty 的深度用户。</p> <h2 id="openresty-安装"><a href="#openresty-安装" class="header-anchor">#</a> OpenResty 安装</h2> <p>OpenResty 依赖库有： perl 5.6.1+, libreadline, libpcre, libssl。</p> <p>所以我们需要先安装好这些依赖库，也非常简单。如果你的系统是 Centos 或 RedHat 可以使用以下命令：</p> <div class="language- extra-class"><pre class="language-text"><code>yum install readline-devel pcre-devel openssl-devel
</code></pre></div><p>接下我们可以在官方（https://openresty.org/cn/）下载最新的 OpenResty 源码包并解压编译安装:</p> <div class="language- extra-class"><pre class="language-text"><code>wget https://openresty.org/download/ngx_openresty-1.9.7.1.tar.gz   # 下载
tar xzvf ngx_openresty-1.9.7.1.tar.gz       # 解压
cd ngx_openresty-1.9.7.1/ 
./configure
make 
make install
</code></pre></div><p>默认情况下程序会被安装到 /usr/local/openresty 目录，你可以使用 ./configure --help 查看更多的配置选项。</p> <h2 id="hello-world-实例"><a href="#hello-world-实例" class="header-anchor">#</a> Hello World 实例</h2> <p>安装成功后，我们就可以使用 openresty 直接输出 html 页面。</p> <p>首先我们可以创建一个工作目录：</p> <div class="language- extra-class"><pre class="language-text"><code>mkdir /home/www
cd /home/www/
mkdir logs/ conf/
</code></pre></div><p>中 logs 目录用于存放日志，conf 用于存放配置文件。</p> <p>接着，我们在 conf 目录下创建一个 nginx.conf 文件 代码如下：</p> <div class="language- extra-class"><pre class="language-text"><code>worker_processes  1;
error_log logs/error.log;
events {
    worker_connections 1024;
}
http {
    server {
        listen 9000;
        location / {
            default_type text/html;
            content_by_lua '
                ngx.say(&quot;&lt;p&gt;Hello, World!&lt;/p&gt;&quot;)
            ';
        }
    }
}
</code></pre></div><p>如果你熟悉 nginx 的配置，应该对以上代码就很熟悉。这里我们将 html 代码直接写在了配置文件中。</p> <h2 id="启动-openresty"><a href="#启动-openresty" class="header-anchor">#</a> 启动 openresty</h2> <p>默认情况下 openresty 安装在 /usr/local/openresty 目录中，启动命令为:</p> <div class="language- extra-class"><pre class="language-text"><code>cd /home/www
/usr/local/openresty/nginx/sbin/nginx -p `pwd`/ -c conf/nginx.conf
</code></pre></div><p>如果没有任何输出，说明启动成功，-p 指定我们的项目目录，-c 指定配置文件。</p> <p>热更新Nginx配置可以用如下命令：</p> <div class="language- extra-class"><pre class="language-text"><code>cd /home/www
/usr/local/openresty/nginx/sbin/nginx -p `pwd`/ -s reload
</code></pre></div><p>接下来我们可以使用 curl 来测试是否能够正常范围：</p> <div class="language- extra-class"><pre class="language-text"><code>curl http://localhost:9000/
</code></pre></div><p>输出结果为：</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;p&gt;Hello, World!&lt;/p&gt;
</code></pre></div><p>或者通过浏览器访问 http://localhost:9000/：</p> <p>看到了吧，我们在配置文件写的 html 已正常输出。</p> <p>OpenResty 的目标是让你的 Web 服务直接跑在 Nginx 服务内部,充分利用 Nginx 的非阻塞 I/O 模型,不仅仅对 HTTP 客户端请求,甚至于对远程后端诸如 MySQL,PostgreSQL,~Memcaches 以及 ~Redis 等都进行一致的高性能响应。</p> <p>所以对于一些高性能的服务来说，可以直接使用 OpenResty 访问 Mysql或Redis等，而不需要通过第三方语言（PHP、Python、Ruby）等来访问数据库再返回，这大大提高了应用的性能。</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">11/7/2020, 2:57:25 PM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.02ee7191.js" defer></script><script src="/assets/js/2.02c84e28.js" defer></script><script src="/assets/js/23.f85b852a.js" defer></script>
  </body>
</html>
